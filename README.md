# BTS Sync Service

–°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –±–∞–∑–æ–≤—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π (BTS) –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –µ–¥–∏–Ω—É—é PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **‚ö†Ô∏è –í–ê–ñ–ù–û**: –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:
> - üöÄ [**QUICK_START_GUIDE.md**](QUICK_START_GUIDE.md) - **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç**
> - üî• [**PROJECT_RULES.md**](PROJECT_RULES.md) - **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
> - üìñ [**DOCUMENTATION_INDEX.md**](DOCUMENTATION_INDEX.md) - –ü–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
> - üèóÔ∏è [**ARCHITECTURE_DIAGRAM.md**](ARCHITECTURE_DIAGRAM.md) - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
> - üí° [**EXAMPLE_SITES_SYNC_IMPLEMENTATION.md**](EXAMPLE_SITES_SYNC_IMPLEMENTATION.md) - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä
> - ü§ñ [**AI_AGENT_INSTRUCTIONS.md**](AI_AGENT_INSTRUCTIONS.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Spring Integration –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL**: radio_data_all, kcell_cm, beeline_kcell_250_plus
- **Atoll (SQL Server)**: –¥–∞–Ω–Ω—ã–µ –æ —Å–∞–π—Ç–∞—Ö, –∞–∑–∏–º—É—Ç–∞—Ö –∏ –≤—ã—Å–æ—Ç–∞—Ö –∞–Ω—Ç–µ–Ω–Ω
- **Atoll Transport (SQL Server)**: —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å–∞–π—Ç—ã
- **Ciptracker (MySQL)**: rollout —Å–∞–π—Ç—ã –∏ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–∞–π—Ç–∞—Ö
- **MariaDB**: –¥–∞–Ω–Ω—ã–µ –æ–± –∏–Ω—Ç–µ—Ä—Ñ–µ—Ä–µ–Ω—Ü–∏—è—Ö —è—á–µ–µ–∫

### –¶–µ–ª–µ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

PostgreSQL —Å 4 —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `sites` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∞–π—Ç–∞—Ö (–≤–∫–ª—é—á–∞—è lat/lon, kato, address)
- `cells` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —è—á–µ–π–∫–∞—Ö (–≤–∫–ª—é—á–∞—è azimut –∏ height)
- `interferences` - –∏–Ω—Ç–µ—Ä—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ —è—á–µ–µ–∫
- `works` - —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–∞–π—Ç–∞—Ö

## –ü–æ—Ç–æ–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 1. Sites (–æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∞–π—Ç—ã)
–û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ 3 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (RADIO_DATA + KCELL_CM + 250_PLUS), –æ–±–æ–≥–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Atoll (lat/lon/kato/address).

### 2. Transport Sites
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å–∞–π—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö.

### 3. Rollout Sites
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç rollout —Å–∞–π—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö.

### 4. Cells
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —è—á–µ–π–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∞–π—Ç–æ–≤, –æ–±–æ–≥–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ azimut –∏ height –∏–∑ Atoll.

### 5. Site Works
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∞–π—Ç–æ–≤.

### 6. Cell Interference
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —è—á–µ–µ–∫.

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å –≤ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. Sites (main) ‚Üí Transport Sites ‚Üí Rollout Sites
2. Cells + Site Works (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
3. Cell Interference

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```properties
RANSHARING_DB_URL=localhost:5432/ransharing
RANSHARING_DB_USERNAME=postgres
RANSHARING_DB_PASSWORD=password

ALARMS_DB_URL=localhost:1521/alarms
ALARMS_DB_USERNAME=oracle_user
ALARMS_DB_PASSWORD=password

MARIA_DB_URL=localhost:3306/maria
MARIA_DB_USERNAME=maria_user
MARIA_DB_PASSWORD=password

ATOLL_DB_URL=localhost:1433;databaseName=atoll
ATOLL_DB_USERNAME=atoll_user
ATOLL_DB_PASSWORD=password

ATOLL_TRANSPORT_DB_URL_ENCRYPT=localhost:1433;databaseName=atoll_transport;encrypt=false
CIPTRACKER_DB_URL=localhost:3306/ciptracker
CIPTRACKER_DB_USERNAME=ciptracker_user
CIPTRACKER_DB_PASSWORD=password
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç `src/main/resources/schema.sql` –≤ —Ü–µ–ª–µ–≤–æ–π PostgreSQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## –ó–∞–ø—É—Å–∫

```bash
mvn spring-boot:run
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ `Map<String, Object>` (–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è records)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `insert_date` –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ `where insert_date = (select max(insert_date) ...)`
- Azimut –∏ height —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–µ cells
- –ù–µ—Ç delete flows - —Ç–æ–ª—å–∫–æ upsert –æ–ø–µ—Ä–∞—Ü–∏–∏
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
